<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber-Canvas AI Studio v2</title>

    <!-- Canvas Editor CSS -->
    <link rel="stylesheet" href="styles/canvas-editor.css">

    <!-- Fonts -->
    <script>
        window.onerror = function (message, source, lineno, colno, error) {
            // Suppress benign ResizeObserver errors
            if (message && String(message).includes('ResizeObserver')) return true;
            if (window.cyberCanvas && window.cyberCanvas.log) {
                window.cyberCanvas.log('error', 'Uncaught Exception:', { message, source, lineno, colno, stack: error ? error.stack : 'No stack' });
            } else {
                console.error('Uncaught Exception (Pre-Bridge):', message, source, lineno, colno, error);
            }
        };
        window.onunhandledrejection = function (event) {
            if (window.cyberCanvas && window.cyberCanvas.log) {
                window.cyberCanvas.log('error', 'Unhandled Rejection:', { reason: event.reason });
            } else {
                console.error('Unhandled Rejection (Pre-Bridge):', event.reason);
            }
        };
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material-darker.min.css">
    <link rel="stylesheet" href="styles/shell.css">
    <!-- Legacy styles migrated to shell.css -->
</head>

<body>

    <!-- App Container will be injected here by Sidebar + ViewManager -->
    <div id="app-shell" style="display: flex; width: 100vw; height: 100vh;">
        <!-- Sidebar injected here -->
        <main id="main-view-container">
            <!-- Views injected here -->
        </main>
    </div>

    <!-- Core Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>

    <!-- Services -->
    <script type="module" src="services/IconSystem.js"></script>
    <script src="services/TemplateEngine.js"></script>
    <script src="services/CarouselEngine.js"></script>
    <script src="services/ContentEngine.js"></script>
    <script src="services/ContentValidator.js"></script>

    <!-- Canvas Rendering Engine -->
    <script src="engine/LayoutConstraints.js"></script>
    <script src="engine/SafeZoneManager.js"></script>
    <script src="engine/TextFitter.js"></script>
    <script src="engine/TextEngine.js"></script>
    <script src="engine/EffectsEngine.js"></script>
    <script src="engine/BrandingSystem.js"></script>
    <script src="engine/CanvasRenderer.js"></script>
    <script src="engine/CanvasEditor.js"></script>
    <script src="engine/index.js"></script>

    <!-- Modular App Entry -->
    <script type="module" src="app.js"></script>

</body>

</html>